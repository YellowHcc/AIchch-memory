# è®°å¿†å¤‡ä»½å·¥ä½œæµ

name: Auto Backup Memory

on:
  # å…è®¸æ‰‹åŠ¨è§¦å‘
  workflow_dispatch:
  
  # æ¯å¤©å‡Œæ™¨è‡ªåŠ¨å¤‡ä»½ï¼ˆUTCæ—¶é—´ï¼‰
  schedule:
    - cron: '0 0 * * *'

permissions:
  contents: write

jobs:
  backup:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          
      - name: Setup Git
        run: |
          git config --global user.name 'Claw Bot'
          git config --global user.email 'claw@ai.local'
      
      - name: Check for changes
        id: check
        run: |
          git add -A
          if git diff --cached --quiet; then
            echo "changed=false" >> $GITHUB_OUTPUT
          else
            echo "changed=true" >> $GITHUB_OUTPUT
          fi
      
      - name: Commit and push changes
        if: steps.check.outputs.changed == 'true'
        run: |
          git commit -m "ðŸ¤– auto: memory backup $(date +'%Y-%m-%d %H:%M:%S')"
          git push
